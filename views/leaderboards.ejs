<%
  let content = [];
  let total = {
    total: 0,
    deleted: 0
  };
  for (let i = 0; i < handles.length; i++) {
    total.deleted += handles[i].deleted;
    total.total += handles[i].total;
    content.push(`
<tr>
  <td><a href="${handles[i].handle}">${handles[i].handle}</a></td>
  <td>${handles[i].deleted}</td>
  <td>${handles[i].total}</td>
  <td>${Math.floor((handles[i].deleted/handles[i].total)*10000)/100 || 0}%</td>
</tr>
  `)
}
%>
<html>
<head>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/jquery-ui.min.css">
  <link rel="stylesheet" href="/css/dataTables.bootstrap.min.css">
  <link rel="icon" type="image/png" href="/img/favicon.png" sizes="196x196">
  <base href="<%=basehref%>">
  <title>Deadbird :: Leaderboards</title>
</head>
<body>
  <autocomplete hidden><%-autocomplete%></autocomplete>
  <socket hidden><%-socket%></socket>
  <a href=""><h1 class="deadbirdtitle"><img id='deadbirdLogo' src='/img/deadbird.svg'>Deadbird</h1></a>
  <% include navbar %>
  <div id="deadbirdMain">
    <h1>Leaderboards</h1><br>
    <p><%=total.deleted%> of <%=total.total%> (<%=Math.floor((total.deleted/total.total)*10000)/100 || 0%>%) tweets have been deleted<br>
    Currently tracking <%=handles.length%> users</p>
    <table id="leaderboard" class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Deleted Tweets</th>
          <th>Total Tweets</th>
          <th>Ratio</th>
        </tr>
      </thead>
      <tfoot>
        <tr>
          <th>Name</th>
          <th>Deleted Tweets</th>
          <th>Total Tweets</th>
          <th>Ratio</th>
        </tr>
      </tfoot>
      <tbody>
      <%-content.join('')%>
      </tbody>
    </table>
  </div>
  <script src="/js/socket.io.min.js"></script>
  <script src="/js/moment.min.js"></script>
  <script src="/js/jquery.js"></script>
  <script src="/js/general.js"></script>
  <script src="/js/leaderboards.js"></script>
  <script src="/js/jquery-ui.min.js"></script>
  <script src="/js/jquery.dataTables.min.js"></script>
  <script src="/js/dataTables.bootstrap.min.js"></script>
</body>
</html>
